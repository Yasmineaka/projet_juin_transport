<!DOCTYPE html>
<html>
<head>
  <title>Formulaire</title>
  <style>
    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
    }

    h1 {
      text-align: center;
    }

    form label {
      display: block;
      margin-top: 10px;
    }

    form input[type="text"],
    form input[type="email"],
    form input[type="date"],
    form select,
    form textarea {
      width: 100%;
      padding: 5px;
      margin-top: 5px;
    }

    form input[type="submit"] {
      margin-top: 10px;
    }

    table {
      width: 100%;
      margin-top: 20px;
      border-collapse: collapse;
    }

    table th,
    table td {
      padding: 5px;
      border: 1px solid #ccc;
    }

    .success {
      color: green;
    }

    .error {
      color: red;
    }

    .file-preview {
      max-width: 200px;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Formulaire</h1>
    <div id="message"></div>
    <form id="myForm">
      <label for="nom">Nom complet :</label>
      <input type="text" id="nom" name="nom" required>

      <label for="adresse">Adresse :</label>
      <input type="text" id="adresse" name="adresse" required>

      <label for="telephone">Numéro de téléphone :</label>
      <input type="text" id="telephone" name="telephone" required>

      <label for="email">Adresse e-mail :</label>
      <input type="email" id="email" name="email" required>

      <label for="dateNaissance">Date de naissance :</label>
      <input type="date" id="dateNaissance" name="dateNaissance" required>

      <label for="categoriePermis">Catégorie du permis de conduire :</label>
      <select id="categoriePermis" name="categoriePermis" required>
        <option value="">Sélectionnez une catégorie</option>
        <option value="B">B</option>
        <option value="C">C</option>
        <option value="D">D</option>
      </select>

      <label for="dateObtentionPermis">Date d'obtention du permis de conduire :</label>
      <input type="date" id="dateObtentionPermis" name="dateObtentionPermis" required>

      <label for="paysEmissionPermis">Pays d'émission du permis de conduire :</label>
      <input type="text" id="paysEmissionPermis" name="paysEmissionPermis" required>

      <label for="responsabilites">Description des responsabilités et des tâches liées au poste :</label>
      <textarea id="responsabilites" name="responsabilites" required></textarea>

      <label for="motivation">Motivation :</label>
      <textarea id="motivation" name="motivation" required></textarea>

      <label for="cv">CV :</label>
      <input class="depot_fiche" type="file" id="cv" name="cv" required>
      <div id="cvPreview" class="file-preview"></div>

      <label for="photoIdentite">Photo d'identité:</label>
      <input class="depot_fiche" type="file" id="photoIdentite" name="photoIdentite" required>
      <div id="photoIdentitePreview" class="file-preview"></div>

      <label for="copiePermis">Copie du permis de conduire :</label>
      <input class="depot_fiche" type="file" id="copiePermis" name="copiePermis" required>
      <div id="copiePermisPreview" class="file-preview"></div>

      <input type="submit" value="Soumettre">
    </form>
    <table id="dataTable">
      <thead>
        <tr>
          <th>Nom</th>
          <th>Adresse</th>
          <th>Téléphone</th>
          <th>Email</th>
          <th>Date de naissance</th>
          <th>Catégorie du permis</th>
          <th>Date d'obtention du permis</th>
          <th>Pays d'émission du permis</th>
          <th>Responsabilités</th>
          <th>Motivation</th>
          <th>CV</th>
          <th>Photo d'identité</th>
          <th>Copie du permis de conduire</th>
          <th>Actions</th> 
          <!-- Autres en-têtes de colonne -->
        </tr>
      </thead>
      <tbody>
        <!-- Les données seront affichées ici -->
      </tbody>
    </table>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Écouteur d'événement pour la soumission du formulaire
      document.getElementById('myForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Empêche la soumission par défaut du formulaire

        // Récupération des valeurs des champs du formulaire
        var nom = document.getElementById('nom').value;
        var adresse = document.getElementById('adresse').value;
        var telephone = document.getElementById('telephone').value;
        var email = document.getElementById('email').value;
        var dateNaissance = document.getElementById('dateNaissance').value;
        var categoriePermis = document.getElementById('categoriePermis').value;
        var dateObtentionPermis = document.getElementById('dateObtentionPermis').value;
        var paysEmissionPermis = document.getElementById('paysEmissionPermis').value;
        var responsabilites = document.getElementById('responsabilites').value;
        var motivation = document.getElementById('motivation').value;
        var cv = document.getElementById('cv').files[0];
        var photoIdentite = document.getElementById('photoIdentite').files[0];
        var copiePermis = document.getElementById('copiePermis').files[0];
        // Vous pouvez récupérer les autres valeurs des champs du formulaire de la même manière

        // Validation des données (vous pouvez ajouter vos propres validations ici)
        if (nom === '' || adresse === '' || telephone === '' || email === '' || dateNaissance === '' || categoriePermis === '' || dateObtentionPermis === '' || paysEmissionPermis === '' || responsabilites === '' || motivation === '' || cv === null || photoIdentite === null || copiePermis === null) {
          showMessage('Veuillez remplir tous les champs du formulaire.', 'error');
          return;
        }

        // Création de l'objet FormData pour l'envoi des données avec les fichiers
        var formData = new FormData();
        formData.append('nom', nom);
        formData.append('adresse', adresse);
        formData.append('telephone', telephone);
        formData.append('email', email);
        formData.append('dateNaissance', dateNaissance);
        formData.append('categoriePermis', categoriePermis);
        formData.append('dateObtentionPermis', dateObtentionPermis);
        formData.append('paysEmissionPermis', paysEmissionPermis);
        formData.append('responsabilites', responsabilites);
        formData.append('motivation', motivation);
        formData.append('cv', cv);
        formData.append('photoIdentite', photoIdentite);
        formData.append('copiePermis', copiePermis);
        // Vous pouvez ajouter les autres champs du formulaire et les fichiers ici

        // Envoi des données via AJAX (simulation)
        sendData(formData);
      });

      // Fonction pour envoyer les données via AJAX (simulation)
      function sendData(formData) {
        // Vous pouvez effectuer ici une requête AJAX réelle pour envoyer les données à un serveur

        // Simulation de l'envoi des données
        setTimeout(function() {
          showMessage('Données soumises avec succès.', 'success');
          resetForm(); // Réinitialise le formulaire
          displayData(formData); // Affiche les données dans le tableau
        }, 1000);
      }

      // Fonction pour réinitialiser le formulaire
      function resetForm() {
        document.getElementById('myForm').reset();
        document.getElementById('cvPreview').innerHTML = ''; // Réinitialise l'aperçu du CV
        document.getElementById('photoIdentitePreview').innerHTML = ''; // Réinitialise l'aperçu de la photo d'identité
        document.getElementById('copiePermisPreview').innerHTML = ''; // Réinitialise l'aperçu de la copie du permis de conduire
      }

      // Fonction pour afficher un message
      function showMessage(message, type) {
        var messageDiv = document.getElementById('message');
        messageDiv.innerHTML = message;
        messageDiv.className = type;
      }

      // Fonction pour afficher les données dans le tableau
      function displayData(data) {
        var tableBody = document.querySelector('#dataTable tbody');
        var row = document.createElement('tr');
        var nameCell = document.createElement('td');
        nameCell.textContent = data.get('nom');
        var adresseCell = document.createElement('td');
        adresseCell.textContent = data.get('adresse');
        var telephoneCell = document.createElement('td');
        telephoneCell.textContent = data.get('telephone');
        var emailCell = document.createElement('td');
        emailCell.textContent = data.get('email');
        var dateNaissanceCell = document.createElement('td');
        dateNaissanceCell.textContent = data.get('dateNaissance');
        var categoriePermisCell = document.createElement('td');
        categoriePermisCell.textContent = data.get('categoriePermis');
        var dateObtentionPermisCell = document.createElement('td');
        dateObtentionPermisCell.textContent = data.get('dateObtentionPermis');
        var paysEmissionPermisCell = document.createElement('td');
        paysEmissionPermisCell.textContent = data.get('paysEmissionPermis');
        var responsabilitesCell = document.createElement('td');
        responsabilitesCell.textContent = data.get('responsabilites');
        var motivationCell = document.createElement('td');
        motivationCell.textContent = data.get('motivation');
        var cvCell = document.createElement('td');
        cvCell.textContent = data.get('cv').name;
        var photoIdentiteCell = document.createElement('td');
        photoIdentiteCell.textContent = data.get('photoIdentite').name;
        var copiePermisCell = document.createElement('td');
        copiePermisCell.textContent = data.get('copiePermis').name;
        // Vous pouvez ajouter les autres cellules de données ici

        row.appendChild(nameCell);
        row.appendChild(adresseCell);
        row.appendChild(telephoneCell);
        row.appendChild(emailCell);
        row.appendChild(dateNaissanceCell);
        row.appendChild(categoriePermisCell);
        row.appendChild(dateObtentionPermisCell);
        row.appendChild(paysEmissionPermisCell);
        row.appendChild(responsabilitesCell);
        row.appendChild(motivationCell);
        row.appendChild(cvCell);
        row.appendChild(photoIdentiteCell);
        row.appendChild(copiePermisCell);
        // Vous pouvez ajouter les autres cellules de données ici

        tableBody.appendChild(row);
      }

      // Écouteur d'événement pour la prévisualisation du CV
      document.getElementById('cv').addEventListener('change', function(event) {
        var cvFile = event.target.files[0];
        var cvPreview = document.getElementById('cvPreview');

        if (cvFile) {
          var reader = new FileReader();

          reader.onload = function() {
            var imgElement = document.createElement('img');
            imgElement.src = reader.result;
            cvPreview.innerHTML = '';
            cvPreview.appendChild(imgElement);
          }

          reader.readAsDataURL(cvFile);
        } else {
          cvPreview.innerHTML = '';
        }
      });

      // Écouteur d'événement pour la prévisualisation de la photo d'identité
      document.getElementById('photoIdentite').addEventListener('change', function(event) {
        var photoIdentiteFile = event.target.files[0];
        var photoIdentitePreview = document.getElementById('photoIdentitePreview');

        if (photoIdentiteFile) {
          var reader = new FileReader();

          reader.onload = function() {
            var imgElement = document.createElement('img');
            imgElement.src = reader.result;
            photoIdentitePreview.innerHTML = '';
            photoIdentitePreview.appendChild(imgElement);
          }

          reader.readAsDataURL(photoIdentiteFile);
        } else {
          photoIdentitePreview.innerHTML = '';
        }
      });

      // Écouteur d'événement pour la prévisualisation de la copie du permis de conduire
      document.getElementById('copiePermis').addEventListener('change', function(event) {
        var copiePermisFile = event.target.files[0];
        var copiePermisPreview = document.getElementById('copiePermisPreview');

        if (copiePermisFile) {
          var reader = new FileReader();

          reader.onload = function() {
            var imgElement = document.createElement('img');
            imgElement.src = reader.result;
            copiePermisPreview.innerHTML = '';
            copiePermisPreview.appendChild(imgElement);
          }

          reader.readAsDataURL(copiePermisFile);
        } else {
          copiePermisPreview.innerHTML = '';
        }
      });
    });


    function displayData(data) {
  var tableBody = document.querySelector('#dataTable tbody');
  var row = document.createElement('tr');
  var nameCell = document.createElement('td');
  nameCell.textContent = data.get('nom');
  var adresseCell = document.createElement('td');
  adresseCell.textContent = data.get('adresse');
  // ... Ajouter le reste des cellules de données ici ...

  var actionsCell = document.createElement('td');
  var deleteButton = document.createElement('button');
  deleteButton.textContent = 'Delete';
  deleteButton.addEventListener('click', function() {
    deleteRow(row);
  });
  var updateButton = document.createElement('button');
  updateButton.textContent = 'Update';
  updateButton.addEventListener('click', function() {
    updateRow(row, data);
  });
  var readButton = document.createElement('button');
  readButton.textContent = 'Read';
  readButton.addEventListener('click', function() {
    readRow(data);
  });

  actionsCell.appendChild(deleteButton);
  actionsCell.appendChild(updateButton);
  actionsCell.appendChild(readButton);

  row.appendChild(nameCell);
  row.appendChild(adresseCell);
  // ... Ajouter le reste des cellules de données ici ...
  row.appendChild(actionsCell);

  tableBody.appendChild(row);
}
document.getElementById('addButton').addEventListener('click', function() {
  // Afficher un formulaire vide ou une fenêtre modale pour ajouter de nouvelles données
});


  </script>
</body>
</html>
